---
layout: postlayout
title: 一步步在GitHub上创建博客主页(4)
description: 本系列文章将一步步教你如何在GitHub上创建自己的博客或主页，事实上相关的文章网上有很多，这里只是把自己的经验分享给新手，方便他们逐步开始GitHub之旅。本篇介绍如何在本地搭建一个GitHub的服务端以便发布前测试。
thumbimg: 1346208288725.jpg
categories: [web-build]
tags: [github-page, jekyll, Ruby]
---

<p>前几篇介绍了GitHub-Page的基本原理和使用方法，还介绍了如何将购买的域名绑定博客主页。然而，当需要正儿八经的将一个博客构建起来，不仅要知道如何上传我们的文件，还要能够高效的更好的设计博客。因此，必须能够在上传之前在本地完成测试；另一方面，完全靠html来编辑博客，显然工作量太大，随着博客越来越复杂，简直不可能维护，因此，需要用jekyll这个模板引擎来帮忙。本篇先介绍如何搭建一个本地的测试环境。</p>
<p>&nbsp;</p>
<p><strong>Ruby安装</strong></p>
<p>jekyll本身基于Ruby开发，因此，想要在本地构建一个测试环境需要具有Ruby的开发和运行环境。在windows下，可以使用Rubyinstaller安装</p>
<p>ruby安装说明：<a title="http://www.ruby-lang.org/zh_cn/downloads/" href="http://www.ruby-lang.org/zh_cn/downloads/">http://www.ruby-lang.org/zh_cn/downloads/</a></p>
<p>ruby安装下载(windows)：<a title="http://rubyinstaller.org/downloads/" href="http://rubyinstaller.org/downloads/">http://rubyinstaller.org/downloads/</a></p>
<p>windows的安装还是一如既往的“无脑”，不多说了。</p>
<blockquote>
<p>如果想要快速体验ruby开发，可以参考：<a href="http://www.ruby-lang.org/zh_cn/documentation/quickstart/" target="_blank">20分钟体验 Ruby</a></p></blockquote>
<p>&nbsp;</p>
<p><strong>RubyDevKit安装</strong></p>
<p>从这个页面下载DevKit：<a title="http://rubyinstaller.org/downloads/" href="http://rubyinstaller.org/downloads/">http://rubyinstaller.org/downloads/</a></p>
<p>下载下来的是一个很有意思的sfx文件，如果你安装有7-zip吧，可以直接双击，它会自解压到你所选择的目录。</p>
<p>解压完成之后，用cmd进入到刚才解压的目录下，运行下面命令，该命令会生成config.yml。（这种安装方式让我想起了，linux下安装三步走config-&gt;make-&gt;make install中的config）</p>
<div style="background-color: rgb(0,0,0); font-family: 'Microsoft Yahei', consolas, 'Lucida Console', 'Courier New'; color: rgb(192,192,192)" class="source"><span style="color: rgb(192,192,192)">ruby</span> <span style="color: rgb(192,192,192)">dk</span><span style="color: rgb(192,192,192)">.</span><span style="color: rgb(192,192,192)">rb</span> <span style="color: rgb(192,192,192)">init</span><br></div>
<p>config.yml文件实际上是检测系统安装的ruby的位置并记录在这个文件中，以便稍后使用。但上面的命令只针对使用rubyinstall安装的ruby有效，如果是其他方式安装的话，需要手动修改config.yml。我生成的config.yml文件内容如下：（注意路径用的是linux的斜杠方向）</p>
<div style="background-color: rgb(249,247,237); font-family: 'Microsoft Yahei', consolas, 'Lucida Console', 'Courier New'; color: rgb(0,0,0)" class="source"><span style="font-style: italic; color: rgb(0,136,0)"># This configuration file contains the absolute path locations of all</span><br><span style="font-style: italic; color: rgb(0,136,0)"># installed Rubies to be enhanced to work with the DevKit. This config</span><br><span style="font-style: italic; color: rgb(0,136,0)"># file is generated by the 'ruby dk.rb init' step and may be modified</span><br><span style="font-style: italic; color: rgb(0,136,0)"># before running the 'ruby dk.rb install' step. To include any installed</span><br><span style="font-style: italic; color: rgb(0,136,0)"># Rubies that were not automagically discovered, simply add a line below</span><br><span style="font-style: italic; color: rgb(0,136,0)"># the triple hyphens with the absolute path to the Ruby root directory.</span><br><span style="font-style: italic; color: rgb(0,136,0)">#</span><br><span style="font-style: italic; color: rgb(0,136,0)"># Example:</span><br><span style="font-style: italic; color: rgb(0,136,0)">#</span><br><span style="font-style: italic; color: rgb(0,136,0)"># ---</span><br><span style="font-style: italic; color: rgb(0,136,0)"># - C:/ruby19trunk</span><br><span style="font-style: italic; color: rgb(0,136,0)"># - C:/ruby192dev</span><br><span style="font-style: italic; color: rgb(0,136,0)">#</span><br><span style="color: rgb(0,0,0)">---</span><br><span style="color: rgb(0,0,0)">-</span> <span style="color: rgb(0,0,0)">C</span><span style="color: rgb(0,0,255)">:/</span><span style="color: rgb(0,0,0)">Ruby193</span><br></div>
<p>最后，执行如下命令，执行安装：</p>
<div style="background-color: rgb(0,0,0); font-family: 'Microsoft Yahei', consolas, 'Lucida Console', 'Courier New'; color: rgb(192,192,192)" class="source"><span style="color: rgb(192,192,192)">ruby</span> <span style="color: rgb(192,192,192)">dk</span><span style="color: rgb(192,192,192)">.</span><span style="color: rgb(192,192,192)">rb</span> <span style="color: rgb(192,192,192)">install</span><br></div>
<p>&nbsp;</p>
<p><strong>Rubygems</strong> 
<p>Rubygems是类似Radhat的RPM、centOS的Yum、Ubuntu的apt-get的应用程序打包部署解决方案。Rubygems本身基于Ruby开发，在Ruby命令行中执行。我们需要它主要是因为jekyll的执行需要依赖很多Ruby应用程序，如果一个个手动安装比较繁琐。jekyll作为一个Ruby的应用，也实现了Rubygems打包标准。只要通过简单的命令就可以自动下载其依赖。 
<p>gems下载地址：<a title="http://rubyforge.org/frs/?group_id=126" href="http://rubyforge.org/frs/?group_id=126">http://rubyforge.org/frs/?group_id=126</a> 
<p>解压后，用cmd进入到解压后的目录，执行命令即可： 
<div style="background-color: rgb(0,0,0); font-family: 'Microsoft Yahei', consolas, 'Lucida Console', 'Courier New'; color: rgb(192,192,192)" class="source"><span style="color: rgb(192,192,192)">ruby</span> <span style="color: rgb(192,192,192)">setup</span><span style="color: rgb(192,192,192)">.</span><span style="color: rgb(192,192,192)">rb</span><br></div>
<p>就像yum仓库一样，仓库本身有很多，如果希望加快应用程序的下载速度，特别绕过“天朝”的网络管理制度，可以选择国内的仓库镜像，taobao有一个：<a title="http://ruby.taobao.org/" href="http://ruby.taobao.org/">http://ruby.taobao.org/</a>。配置方法这个链接里面很完全。</p>
<p>&nbsp;</p>
<p><strong>安装jekyll</strong></p>
<p>有了上面的基础，安装jekyll就十分轻松了，执行下面gem命令即可全自动搞定：</p>
<div style="background-color: rgb(0,0,0); font-family: 'Microsoft Yahei', consolas, 'Lucida Console', 'Courier New'; color: rgb(192,192,192)" class="source"><span style="color: rgb(192,192,192)">gem</span> <span style="color: rgb(192,192,192)">install</span> <span style="color: rgb(192,192,192)">jekyll</span><br></div>
<blockquote><pre><code><font size="2" face="微软雅黑">jekyll依赖的组件如下：</font>
<ul>
<li><font size="2" face="微软雅黑">directory_watcher</font> 
<li><font size="2" face="微软雅黑">liquid</font> 
<li><font size="2" face="微软雅黑">open4</font> 
<li><code><font size="2" face="微软雅黑">maruku</font></code> 
<li><font size="2" face="微软雅黑">classifier</font></li></ul>
</code></pre>
</blockquote>
<p><strong>测试jekyll服务</strong></p>
<p>安装好之后就可以测试我们的环境了。用cmd进入到上一节我们创建的目录，执行下面命令：</p>
<div style="background-color: rgb(0,0,0); font-family: 'Microsoft Yahei', consolas, 'Lucida Console', 'Courier New'; color: rgb(192,192,192)" class="source"><span style="color: rgb(192,192,192)">jekyll</span> <span style="color: rgb(192,192,192)">--</span><span style="color: rgb(192,192,192)">server</span> <span style="color: rgb(192,192,192)">--</span><span style="color: rgb(192,192,192)">safe</span><br></div>
<p><a href="{{ site.baseurl }}/assert/img/build-github-blog-page-04-img0.png"><img style="display: inline" title="image" alt="image" src="{{ site.baseurl }}/assert/img/build-github-blog-page-04-img0.png" width="481" height="311"></a></p>
<p>jekyll此时会在localhost的4000端口监听http请求，用浏览器访问<a href="http://localhost:4000/projectname/index.html">http://localhost:4000/projectname/index.html</a>，之前的页面出现了！</p>